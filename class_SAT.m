% =================================================================
% Winner LAB, Ajou University
% Distance-based HO Parameter Optimization Protocol Code
% Prototype    : class_SAT.m
% Type         : MATLAB Class
% Author       : Jongtae Lee
% Revision     : v1.0   2024.06.04
% Modified     : 2024.07.01
% =================================================================
classdef class_SAT
    properties
        BORE_X
        BORE_Y
        cond_BORE_X
        cond_BORE_Y

        TX_GAIN                 % dBi [Set1-600: Tx antenna max gain]
        APERATURE               % meter [Set1-600: Antenna Aperture]
        EIRP                    % dBW/MHz [Set1-600: EIRP density]
        ALTITUDE                % 600 km [Altitude]
       
        HPBW_3 = 4.4127;        % degree [Half Power Beamwidth 3 dB angle]
        SAT_SPEED = 7560;       % Satellite Speed (7.56 km/s)
        TXPW_dBm                % Transmit Power [dBm]
        TXPW_watt               % Transmit Power [W]
        TXPW_mwatt              % Transmit Power [mW]
    end
    
    methods
        function obj = class_SAT()
            % Load parameters from system_parameter.m
            run('system_parameter.m');
            
            % Assign values to properties
            obj.TX_GAIN = Tx_g;
            obj.APERATURE = AP;
            obj.EIRP = eirp;
            obj.ALTITUDE = altit;

            % Initialize BORE_X and BORE_Y with values from system_61_site.m
            run("system_61_site.m");
            obj.BORE_X = x';
            obj.BORE_Y = y';
            % obj.BORE_X = [0.0, 0.0, -34757.63516, -34757.63516, 0, 34757.63516, 34757.63516, 0, -34993.70677, -70047.95629, -70047.95629, -70047.95629, -34993.70677, 0, 34993.70677, 70047.95629, 70047.95629, 70047.95629, 34993.70677, 0, -35398.0797, -70857.40174, -106255.4814, -106255.4814, -106255.4814, -106255.4814, -70857.40174, -35398.0797, 0, 35398.0797, 70857.40174, 106255.4814, 106255.4814, 106255.4814, 106255.4814, 70857.40174, 35398.0797, 0, -35988.50254, -72039.26893, -108027.7715, -144078.5379, -144078.5379, -144078.5379, -144078.5379, -144078.5379, -108027.7715, -72039.26893, -35988.50254, 0, 35988.50254, 72039.26893, 108027.7715, 144078.5379, 144078.5379, 144078.5379, 144078.5379, 144078.5379, 108027.7715, 72039.26893, 35988.50254];
            % obj.BORE_Y = [0.0, 40169.72368, 20084.86184, -20084.86184, -40169.72368, -20084.86184, 20084.86184, 80885.1077, 60663.83077, 40442.55385, 0, -40442.55385, -60663.83077, -80885.1077, -60663.83077, -40442.55385, 0, 40442.55385, 60663.83077, 122729.6742, 102213.4862, 81819.78283, 61364.83712, 20454.94571, -20454.94571, -61364.83712, -81819.78283, -102213.4862, -122729.6742, -102213.4862, -81819.78283, -61364.83712, -20454.94571, 20454.94571, 61364.83712, 81819.78283, 102213.4862, 166368.9945, 145572.8702, 124776.7458, 103918.3577, 83184.49723, 41592.24862, 0, -41592.24862, -83184.49723, -103918.3577, -124776.7458, -145572.8702, -166368.9945, -145572.8702, -124776.7458, -103918.3577, -83184.49723, -41592.24862, 0, 41592.24862, 83184.49723, 103918.3577, 124776.7458, 145572.8702];

            % Satellite Power Calculation
            obj.TXPW_dBm = obj.EIRP + 30 + 10 * log10(20) - 30;   % LTE based on a 20MHz bandwidth [dBm]
            obj.TXPW_watt = 1 * 10^(obj.TXPW_dBm / 10) / 1000;    % convert dBm to watt [W]
            obj.TXPW_mwatt = 10^(obj.TXPW_dBm / 10);              % convert dBm to mili watt [mW]
        end
        function obj = reset_SAT(obj)
            % Re-load parameters from system_parameter.m
            run('system_parameter.m');
            
            % Re-assign values to properties
            obj.TX_GAIN = Tx_g;
            obj.APERATURE = AP;
            obj.EIRP = eirp;
            obj.ALTITUDE = altit;

            % Reset BORE_X and BORE_Y with values from system_61_site.m
            run("system_61_site.m");
            obj.BORE_X = x';
            obj.BORE_Y = y';
        %     obj.BORE_X = [0.0, 0.0, -34757.63516, -34757.63516, 0, 34757.63516, 34757.63516, 0, -34993.70677, -70047.95629, -70047.95629, -70047.95629, -34993.70677, 0, 34993.70677, 70047.95629, 70047.95629, 70047.95629, 34993.70677, 0, -35398.0797, -70857.40174, -106255.4814, -106255.4814, -106255.4814, -106255.4814, -70857.40174, -35398.0797, 0, 35398.0797, 70857.40174, 106255.4814, 106255.4814, 106255.4814, 106255.4814, 70857.40174, 35398.0797, 0, -35988.50254, -72039.26893, -108027.7715, -144078.5379, -144078.5379, -144078.5379, -144078.5379, -144078.5379, -108027.7715, -72039.26893, -35988.50254, 0, 35988.50254, 72039.26893, 108027.7715, 144078.5379, 144078.5379, 144078.5379, 144078.5379, 144078.5379, 108027.7715, 72039.26893, 35988.50254];
        %     obj.BORE_Y = [0.0, 40169.72368, 20084.86184, -20084.86184, -40169.72368, -20084.86184, 20084.86184, 80885.1077, 60663.83077, 40442.55385, 0, -40442.55385, -60663.83077, -80885.1077, -60663.83077, -40442.55385, 0, 40442.55385, 60663.83077, 122729.6742, 102213.4862, 81819.78283, 61364.83712, 20454.94571, -20454.94571, -61364.83712, -81819.78283, -102213.4862, -122729.6742, -102213.4862, -81819.78283, -61364.83712, -20454.94571, 20454.94571, 61364.83712, 81819.78283, 102213.4862, 166368.9945, 145572.8702, 124776.7458, 103918.3577, 83184.49723, 41592.24862, 0, -41592.24862, -83184.49723, -103918.3577, -124776.7458, -145572.8702, -166368.9945, -145572.8702, -124776.7458, -103918.3577, -83184.49723, -41592.24862, 0, 41592.24862, 83184.49723, 103918.3577, 124776.7458, 145572.8702];
        end
    end
end
